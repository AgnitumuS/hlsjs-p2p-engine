<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>hls-peerify-bundle</title>
</head>
<script src="../dist/hls-peerify-bundle.js"></script>
<body>
<video id="video" width="320" height="240" controls></video>
<script>
//    console.log('hlsjs version: ' + Hls.version());
    console.log('plugin version: ' + Hls.pluginVersion);
    if(Hls.isSupported()) {
        var video = document.getElementById('video');

        var hlsjsConfig = {
//        debug: true,
//      pLoader : pLoader,
        }

        var p2pConfig = {debug: true};

        var hls = new Hls(p2pConfig, hlsjsConfig);

        hls.loadSource('https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8');
//        hls.loadSource('https://video-dev.github.io/streams/test_001/stream.m3u8');
//        hls.loadSource('https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8');
            hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED,function(event, data) {
            hls.loadLevel = 0;
            video.play();
        });

        hls.on(Hls.Events.ERROR, function (event, data) {
            var errorType = data.type;
            var errorDetails = data.details;
            var errorFatal = data.fatal;
            console.warn('error details:'+errorDetails);
//      switch(data.details) {
//        case hls.ErrorDetails.FRAG_LOAD_ERROR:
//          // ....
//          break;
//        default:
//          break;
//      }
        });
    }
</script>
</body>
</html>